connector:
  - id: input
    type: file
    codec: json
    preprocessors:
      - lines
    config:
      path: "./in.json.xz"
      mode: read
  - id: ws-out
    type: ws_client
    codec: json
    postprocessors:
      - lines
    config:
      url: "ws://127.0.0.1:4242/"
  - id: exit
    type: exit

binding:
  - id: main
    links:
      "/connector/input/{instance}/out": ["/pipeline/main/{instance}/in"]
      "/pipeline/main/{instance}/out": ["/connector/ws-out/{instance}/in"]
      "/pipeline/main/{instance}/exit": ["/connector/exit/{instance}/in"]

mapping:
  /binding/main/1:
    instance: "1"

# use std::string;

# define tumbling window my_window
# with
#   interval = core::datetime::with_seconds(1)
# end;
# define tumbling window my_other_window
# with
#   interval = core::datetime::with_seconds(2)
# end;

# select
#   [
#     window,
#     string::lowercase(event.name),
#     not not event.bool,
#     aggr::win::last(event.array),
#     aggr::win::collect_flattened($)
#   ]
# from in[my_window, my_other_window]
# group by set(event.name, not event.bool)
# into out;
onramp:
  - id: in
    type: file
    config:
      source: in.json
      sleep_on_done: 2500
      close_on_done: true
offramp:
  - id: out
    type: file
    config:
      file: out.log

binding:
  - id: bind
    links:
      "/onramp/in/{i}/out": ["/pipeline/main/{i}/in"]
      "/pipeline/main/{i}/out": ["/offramp/out/{i}/in"]
mapping:
  /binding/bind/01:
    i: "01"